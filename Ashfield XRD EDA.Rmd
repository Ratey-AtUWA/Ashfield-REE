---
title: "Ashfield 2019-2022 spatial analyses"
output: 
  bookdown::html_document2:
    fig_width: 6.4
    fig_height: 4.8
    number_sections: no
    self_contained: no
    df_print: default
    fig_caption: yes
    smart: no
---

```{r load packages and environment but do not show, message=FALSE, warning=FALSE, echo=FALSE, include=FALSE}
library(mgsub)
library(sp)
library(lctools)
library(gstat)
library(sf)
library(maptiles)
library(prettymapr)
library(fields)
library(viridis)
library(ncf)
library(flextable)
  set_flextable_defaults(font.family = 'sans', theme_fun = "theme_zebra", 
        font.size = 11, text.align = "right",padding.left = 1, padding.right = 1,
        padding.top = 2, padding.bottom = 2)
```

```{r message=FALSE, warning=FALSE, include=FALSE}
git <- "https://github.com/Ratey-AtUWA/Ashfield-REE/raw/main/"
```

```{r importing the data, message=FALSE, warning=FALSE, results='hold', echo=FALSE}
afs1922 <- read.csv(paste0(git,"afs1922.csv"), stringsAsFactors = TRUE)
afs1922$Year <- as.factor(afs1922$Year)
```

```{r store and show file lists, results='hold'}
require(mgsub)

cat("--+-- Random powder XRD sample list --+--\n")
(pXRDfiles<-mgsub(list.files("./RP-XRD-S2-2022/"),c(".csv","Sample"),c("","S")))

cat("\n--+-- Oriented clay XRD sample list --+--\n")
clayfiles <- mgsub(list.files("./clay-plate-XRD-S2-2022/"),
                   c(".csv","ENVT4461 "," ","-"),
                   c("","","_","_"))
(clayfiles <- gsub("Heated_","Heat",clayfiles))
```

```{r read all the random powder datafiles}
for (i in 1:14){
  assign(paste0(pXRDfiles[i],"_pXRD"), 
         (paste0("./RP-XRD-S2-2022/", pXRDfiles[i],".csv")))
}
ls(pattern = "_pXRD")
```

```{r rp-xrd-plots, fig.height=3.75, fig.width=10, message=FALSE, warning=FALSE}
with(S22_pXRD, plot(Counts ~ Angle, type = "l", col = 2, 
                    xlab = "Angle (\u00B0 2\u03B8)", xaxt = "n"))
axis(1, at = seq(0,80,10), labels = seq(0,80,10))
mtext("Ashfield Flats sediment sample S22_2022", 3, -1.2,col=2, adj=0.99, font=2)
```

```{r}
for (i in 1:length(clayfiles)){
  assign(paste0("CP_",clayfiles[i]), 
         (paste0("./clay-plate-XRD-S2-2022/", clayfiles[i],".csv")))
}

```

